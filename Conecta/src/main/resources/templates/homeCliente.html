<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<title>Home | Cliente</title>
</head>
<body>

	<div>
		<h1>
			Seja bem vindo, <label
				th:text="${#httpServletRequest.getAttribute('nome')}"></label>
		</h1>
	</div>

	<div>
		<h2>Lista de disponibilidade</h2>
		<table>
			<thead>
				<tr>
					<th>Cód.</th>
					<th>Consultor</th>
					<th>Hora início</th>
					<th>Hora fim</th>
					<th>Créditos / h</th>
					<th>Habilidade Principal</th>
					<th>Habilidade Especifica</th>
<!-- 				<th>Selecionar</th> -->
				</tr>
			</thead>
			<tbody>
				<tr th:each="d : ${disponiveis}">
					<td th:text="${d.consultor.idUsuario}"></td>
					<td th:text="${d.consultor.nome}"></td>
					<td th:text="${d.horaInicio}"></td>
					<td th:text="${d.horaFim}"></td>
					<td th:text="${d.consultor.creditosPorHora}"></td>
					<td>
						<table>
							<tbody>
								<tr th:each="h : ${d.consultor.habilidadesEspecificas}">
									<td
										th:text="${h.habilidadesPrincipais.nomeHabilidadePrincipal}"></td>
									<td th:text="${h.nomeHabilidadeEspecifica}"></td>
								</tr>
							</tbody>
						</table>
					</td>

					<td><button type="button">Botão</button></td>
				</tr>
			</tbody>
		</table>
		
		<div>
			<h2>Agendamento</h2>

			<form action="/homeCliente/criaragendamento" method="post">
				<Label>Título</Label>
				<input type="text" th:field="${pedido.titulo}">
				<Label>Descrição</Label>
				<input type="text" th:field="${pedido.descricao}">
				<Label>Sugestão de Horas</Label>
				<input type="text" th:field="${pedido.sugestaoDeHoras}">
				
				<select th:field="${pedido.projeto}" name="idProjeto">
					<option value="">Escolha o projeto</option>
					<option th:each="p : ${projeto}"
							th:value="${p.idProjeto}"
							th:text="${p.idProjeto + ' - ' + p.nome}">
					</option>
				</select>
				
				<input type="text" th:field="${agendamento.consultor}">
				
				<input type="submit" value="Salvar">
				
				<input type="hidden" th:name="${_csrf.parameterName}"
				th:value="${_csrf.token}" />
			</form>
		</div>
		
		<div>
			<h2>Pedido</h2>
			<form action="/homeCliente/criarpedido" method="post" th:object="${pedido}">
				<Label>Título</Label>
				<input name="titulo">
				<Label>Descrição</Label>
				<input name="descricao">
				<Label>Sugestão de Horas</Label>
				<input name="sugestaoDeHoras">
				
				<select th:field="*{projeto}" name="idProjeto">
					<option value="">Escolha o projeto</option>
					<option th:each="p : ${projeto}"
							th:value="${p.idProjeto}"
							th:text="${p.idProjeto + ' - ' + p.nome}">
					</option>
				</select>
				<input type="submit" value="Salvar">
				
				<input type="hidden" th:name="${_csrf.parameterName}"
				th:value="${_csrf.token}" />
			</form>
		</div>
		
		<div>
			<table>
				<thead>
					<tr>
						<th>Cod</th>
						<th>Título do Pedido</th>
						<th>Projeto</th>
						<th>Status</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="p : ${pedidosRealizados}">
						<td th:text="${p.idPedido}"></td>
						<td th:text="${p.titulo}"></td>
						<td th:text="${p.projeto.nome}"></td>
						<td th:text="${p.status}"></td>
					</tr>
				</tbody>
			</table>
		</div>
		
		<div>
		<table>
			<thead>
				<tr>
					<th>Cod</th>				
					<th>Título do Agendamento</th>
					<th>Projeto</th>
					<th>Status</th>
				</tr>			
			</thead>
			<tbody>
				<tr th:each = "a : ${agendamentosCriados}">
					<td th:text="${a.idAgendamento}"></td>
					<td th:text="${a.pedido.titulo}"></td>
					<td th:text="${a.pedido.projeto.nome}"></td>
					<td th:text="${a.pedido.status}"></td>
					<td>
						<button type="button">Aprovar</button>
					</td>
				</tr>
			</tbody>
		</table>
		</div>
</body>
</html>
